<html>
<head>
  <title>Sample Verify User Page</title>
	<link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
</head>
<body>
  <h1>Sample Verify User Page</h1>
  <div id="info">
  Verifying...
  </div>
	<div class="center">
		<a href="index.html">Back</a>
  </div>
  <script>
  var info = document.getElementById('info');
  function getUrlParams() {
    var p = {};
    var match,
      pl     = /\+/g,  // Regex for replacing addition symbol with a space
      search = /([^&=]+)=?([^&]*)/g,
      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
      query  = window.location.search.substring(1);

    while (match = search.exec(query))
      p[decode(match[1])] = decode(match[2]);
    return p;
  }
  function init() {
    var urlParams = getUrlParams();
    if (!('email' in urlParams) || !('verify' in urlParams)) {
      info.innerHTML = 'Please specify email and verify token in the URL.';
    } else {
      var input = {
        email: urlParams['email'],
        verify: urlParams['verify']
      };

      $.ajax({
        type: "POST",
        contentType: "application/json",
        url: 'https://0qomu2q3rb.execute-api.eu-west-1.amazonaws.com/Dev/v1/auth/verifyUser',
        data: JSON.stringify(input),
        dataType: "json",
        success: function(){info.innerHTML = 'User ' + input.email + ' has been <b>Verified</b>, thanks!'},
        error: function(){info.innerHTML = 'User ' + input.email + ' has <b>not</b> been Verified, sorry.'},
      });

    }
  }
  window.onload = init();
  </script>
</body>
</html>
